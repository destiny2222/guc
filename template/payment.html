<body onload="payWithPaystack()">
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script>
    window.onload=function(){
    payWithPaystack();
    };
    function payWithPaystack(){
    var handler = PaystackPop.setup({
    key: 'pk_test goes here',
    email:'{{email}}',
    amount:'{{amount}}00',
    currency: "NGN",
    metadata: {
    custom_fields: [
    {
    display_name: "Mobile Number",
    variable_name: "mobile_number",
    value: "{{phone}}"
    }
    ]
    },
    callback: function(response){
    alert('success. transaction ref is ' + response.reference);
    },
    onClose: function(){
    alert('window closed');
    }
    });
    handler.openIframe();
    }
    </script>
    </body>

    <div class="col-lg-12">
        <form method="POST">
            {% csrf_token  %}
            {{  form.as_p  }}
            <input type="submit" class="btn" value="Pay">
        </form>
    </div>